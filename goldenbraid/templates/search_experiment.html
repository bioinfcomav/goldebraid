{% extends "base.html" %}
{% load goldenbraid_extras %}
{% block title %}Experiment search {% endblock title %}

{% block extra_js %}
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.js" type="text/javascript"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
<script src="/static/autocomplete-init.js"></script>
{% endblock %}

{% block content %}
	{% if not search_criteria %}
		<div class='tools'>
<h1>Search Database<img src='{{STATIC_URL}}style/images/lupa.png' alt="search" style="margin:0 0 -10px 4px;"/></h1>
<div id='searchmenu'>
<ul>
<li><a href="/search/features">GB_Elements</a></li>
<li class='current'><a href="/search/experiment">Experiments</a></li>
</ul>
</div>
<ul class="search"><li><span class="tools">Fill one or more of the options below to limit your results to the experiments that satisfy your search criteria.</li>
<li>To get a list of all the existing experiments leave all fields empty.</li></ul>
</div>

	{% endif %}
	{% if search_criteria and not experiments_page.paginator.count %}
	   <p>No experiments found</p>
	{% endif %}
	{% if experiments_page.object_list %}
	  <p>
	  {% if 'kind' in search_criteria %}
	      {{ experiments_page.object_list.0.type.name|replaceunderscore|capfirst }}{{ experiments_page.paginator.count|pluralize }} found: {{ features_page.paginator.count }} </p>
	  {% else %}
	    Experiments found: {{ experiments_page.paginator.count }} </p>
	  {% endif%}
	
	  {% with experiments=experiments_page.object_list %}
	    {% include "experiment_table.html" %}
	  {% endwith %}
	  {% with search_criteria=search_criteria page=experiments_page %}
	    {% include "pagination.html" %}
	  {% endwith %}
	{% else %}
	   <form action="{% url 'search_experiments' %}" method="post">{% csrf_token %}
           <fieldset>
           <legend>Search criteria:</legend>
           {{ form.as_p }}
           </fieldset>
	    <input type="submit" value="Search" />
	   </form>
	   {{ form.kind.errors }}
	
	{% endif %}
{% endblock content %}
